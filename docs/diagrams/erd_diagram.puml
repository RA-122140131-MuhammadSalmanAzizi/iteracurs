@startuml ERD - LearnHub E-Learning Platform

skinparam backgroundColor #FEFEFE
skinparam linetype ortho

title Entity Relationship Diagram: LearnHub E-Learning Platform

' ========== ENTITIES ==========

entity "users" as users {
    * id : INT <<PK>>
    --
    * email : VARCHAR(255) <<UNIQUE>>
    * password : VARCHAR(255)
    * name : VARCHAR(255)
    avatar : VARCHAR(10)
    * role : ENUM('customer','dosen','admin')
    created_at : TIMESTAMP
    updated_at : TIMESTAMP
}

entity "courses" as courses {
    * id : INT <<PK>>
    --
    * title : VARCHAR(255)
    * description : TEXT
    * instructor_id : INT <<FK>>
    instructor_avatar : VARCHAR(10)
    * category_id : INT <<FK>>
    * level : ENUM('Beginner','Intermediate','Advanced','All Levels')
    duration : VARCHAR(50)
    lessons_count : INT
    students_count : INT
    rating : DECIMAL(2,1)
    reviews_count : INT
    * price : DECIMAL(10,2)
    * is_free : BOOLEAN
    thumbnail : VARCHAR(500)
    last_updated : DATE
    created_at : TIMESTAMP
    updated_at : TIMESTAMP
}

entity "categories" as categories {
    * id : INT <<PK>>
    --
    * name : VARCHAR(100)
    icon : VARCHAR(50)
    courses_count : INT
}

entity "chapters" as chapters {
    * id : INT <<PK>>
    --
    * course_id : INT <<FK>>
    * title : VARCHAR(255)
    * sort_order : INT
}

entity "lessons" as lessons {
    * id : INT <<PK>>
    --
    * chapter_id : INT <<FK>>
    * title : VARCHAR(255)
    * duration : VARCHAR(20)
    video_url : VARCHAR(500)
    * sort_order : INT
}

entity "enrollments" as enrollments {
    * id : INT <<PK>>
    --
    * user_id : INT <<FK>>
    * course_id : INT <<FK>>
    enrolled_at : TIMESTAMP
    completed_at : TIMESTAMP
    progress : INT
}

entity "lesson_progress" as lesson_progress {
    * id : INT <<PK>>
    --
    * user_id : INT <<FK>>
    * lesson_id : INT <<FK>>
    * completed : BOOLEAN
    completed_at : TIMESTAMP
}

entity "reviews" as reviews {
    * id : INT <<PK>>
    --
    * course_id : INT <<FK>>
    * user_id : INT <<FK>>
    * rating : INT
    comment : TEXT
    * status : ENUM('pending','approved','rejected')
    * created_at : TIMESTAMP
}

entity "certificates" as certificates {
    * id : VARCHAR(50) <<PK>>
    --
    * user_id : INT <<FK>>
    * course_id : INT <<FK>>
    * course_name : VARCHAR(255)
    * user_name : VARCHAR(255)
    * issued_date : DATE
    created_at : TIMESTAMP
}

entity "course_tags" as course_tags {
    * id : INT <<PK>>
    --
    * course_id : INT <<FK>>
    * tag : VARCHAR(50)
}

' ========== RELATIONSHIPS ==========

users ||--o{ courses : "creates (as instructor)"
users ||--o{ enrollments : "enrolls in"
users ||--o{ reviews : "writes"
users ||--o{ certificates : "owns"
users ||--o{ lesson_progress : "tracks"

courses ||--o{ enrollments : "has"
courses ||--o{ chapters : "contains"
courses ||--o{ reviews : "receives"
courses ||--o{ certificates : "issues"
courses ||--o{ course_tags : "has"
courses }o--|| categories : "belongs to"

chapters ||--o{ lessons : "contains"

lessons ||--o{ lesson_progress : "tracked by"

@enduml
